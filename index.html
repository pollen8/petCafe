<!DOCTYPE html>
<html>
<head>
  <title>Item Collector Game</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    button { margin: 5px; padding: 10px; }
    #status { margin-top: 20px; }
  </style>
   <style>
    body {
      font-family: sans-serif;
      background: #333;
      color: white;
    }

    #game {
      display: grid;
      grid-template-columns: repeat(10, 32px);
      grid-template-rows: repeat(10, 32px);
      gap: 0;
      margin: 20px auto;
      width: 320px;
      position: relative; /* Ensure the game container is the reference for absolute positioning */
    }

    .tile {
      width: 32px;
      height: 32px;
      image-rendering: pixelated;
    }

    .grass { background: url('grass.png'); }
    .wood { background: url('wood.png'); }
    .stone { background: url('stone.png'); }

    /* Fallback styles if no images yet */
    .tile.grass { background-color: #4caf50; }
    .tile.wood { background-color: #795548; }
    .tile.stone { background-color: #9e9e9e; }

    #character {
      width: 32px;
      height: 32px;
      background-color: rgb(150, 100, 232);
      z-index: 10;
      position: absolute; /* Position the character absolutely */
      top: 0; /* Start at the top */
      left: 0; /* Start at the left */
      transition: top 0.1s, left 0.1s; /* Smooth movement */
    }

  </style>
</head>
<body>

  <h1>Item Collector Game</h1>
  <div id="game"></div>
  <button onclick="collectItem()">Collect Wood</button>
  <button onclick="sellItem()">Sell Wood</button>

  <div id="status">
    <p><strong>Wood:</strong> <span id="wood-count">0</span></p>
    <p><strong>Money:</strong> $<span id="money">0</span></p>
  </div>

  <script>
    let wood = 0;
    let money = 0;

    function collectItem() {
      wood++;
      updateDisplay();
    }

    function sellItem() {
      if (wood > 0) {
        wood--;
        money += 5;
        updateDisplay();
      } else {
        alert("You have no wood to sell!");
      }
    }

    function updateDisplay() {
      document.getElementById("wood-count").textContent = wood;
      document.getElementById("money").textContent = money;
    }

    const mapWidth = 10;
    const mapHeight = 10;

    // Simple tile map array using types
    const tileTypes = ['grass', 'wood', 'stone'];
    const mapData = [];

    for (let y = 0; y < mapHeight; y++) {
      for (let x = 0; x < mapWidth; x++) {
        const tileType = tileTypes[Math.floor(Math.random() * tileTypes.length)];
        mapData.push(tileType);
      }
    }

    const gameContainer = document.getElementById("game");

    // Render the tiles
    mapData.forEach((type, index) => {
      const tile = document.createElement("div");
      tile.classList.add("tile", type);
      tile.dataset.index = index; // Store the index of the tile
      gameContainer.appendChild(tile);
    });

    // Add the character
    const character = document.createElement("div");
    character.id = "character";
    character.style.gridColumnStart = 1;
    character.style.gridRowStart = 1;
    gameContainer.appendChild(character);

    let characterX = 0;
    let characterY = 0;
    const tileSize = 32; // Size of each tile in pixels

    document.addEventListener("keydown", (event) => {
      switch (event.key) {
        case "ArrowUp":
          if (characterY > 0) characterY--;
          break;
        case "ArrowDown":
          if (characterY < mapHeight - 1) characterY++;
          break;
        case "ArrowLeft":
          if (characterX > 0) characterX--;
          break;
        case "ArrowRight":
          if (characterX < mapWidth - 1) characterX++;
          break;
        case "Enter":
          collectWood();
          break;
      }
      updateCharacterPosition();
    });

    function updateCharacterPosition() {
      const character = document.getElementById("character");
      character.style.top = `${characterY * tileSize}px`;
      character.style.left = `${characterX * tileSize}px`;
    }

    function collectWood() {
      const tileIndex = characterY * mapWidth + characterX;
      if (mapData[tileIndex] === 'wood') {
        mapData[tileIndex] = 'grass'; // Change the tile type to grass
        const tile = gameContainer.querySelector(`[data-index="${tileIndex}"]`);
        tile.classList.remove('wood');
        tile.classList.add('grass');
        wood++;
        updateDisplay();

        // Set a timeout to turn the tile back to wood after 30 seconds
        setTimeout(() => {
          mapData[tileIndex] = 'wood'; // Change the tile type back to wood
          tile.classList.remove('grass');
          tile.classList.add('wood');
        }, 10000); // 30 seconds in milliseconds
      }
    }
  </script>

</body>
</html>
